"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[806],{70806:function(e,n,r){r.r(n),r.d(n,{default:function(){return T}});var t=r(35944),o=r(86886),i=r(70917),a=r(77044),u=r(94859),c=r(67294),d=r(90948),s=r(41796),l=r(87357),p=r(22038),f=r(10633),m=r(655);function h(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=[],t=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(t=(a=u.next()).done)&&(r.push(a.value),!n||r.length!==n);t=!0);}catch(c){o=!0,i=c}finally{try{t||null==u.return||u.return()}finally{if(o)throw i}}return r}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var v=(0,d.ZP)(f.Z)((function(e){return{"& .MuiPaginationItem-root":{borderRadius:"4px",minWidth:"20px",height:"20px"},"& .MuiPaginationItem-root:not(.Mui-selected)":{border:"none",color:e.theme.palette.text.secondary},"& .MuiPaginationItem-root.Mui-selected":{background:"transparent"}}})),w=function(){var e=(0,m.lML)(),n=h((0,m.SYq)(e),1)[0];return n.pagination.pageCount>1?(0,t.tZ)(v,{color:"primary",variant:"outlined",count:n.pagination.pageCount,page:n.pagination.page+1,onChange:function(n,r){return e.current.setPage(r-1)}}):null},g=r(80502),y=r(75447),x=[{field:"pairs",headerName:"Pairs",width:180},{field:"sell",headerName:"Sell",width:150},{field:"expected",headerName:"Expected",width:150},{field:"dateOfExecution",headerName:"Date",flex:1}],A=(0,d.ZP)(m._$r)((function(e){var n=e.theme;return{border:"none",fontSize:"0.8125rem",lineHeight:"1rem",fontWeight:400,color:(0,s.Fq)(p.S.text[n.palette.mode],.85),borderRadius:0,cursor:"pointer","& .MuiDataGrid-columnsContainer, .MuiDataGrid-cell":{padding:"0 1.5rem",borderBottom:"1px solid ".concat((0,s.Fq)(p.S.text[n.palette.mode],.02))},"& .MuiDataGrid-columnSeparator":{display:"none"},"& .MuiDataGrid-columnHeaders":{borderBottom:"none"},"& .MuiDataGrid-footerContainer":{minHeight:"40px"},"& .MuiDataGrid-columnHeaderTitleContainer":{padding:0,color:n.palette.text.secondary},"& .MuiDataGrid-columnHeader":{padding:"0 1.5rem",background:(0,s.Fq)(p.S.text[n.palette.mode],.02)},"& .MuiDataGrid-columnHeaderTitle":{paddingRight:"1rem"}}})),b=function(e){var n=e.rows,r=e.chainId,o=e.searchQuery,i=(0,y.Lw)(),a=n.map((function(e){return(0,u.z)(e,r,i,"history")})).filter((function(e){return e&&"string"===typeof e.pairs&&!!e.pairs.match(new RegExp((0,g.JX)(o),"i"))})),c=Math.min(880,42*a.length+42);return(0,t.tZ)(l.Z,{style:{height:c},children:(0,t.tZ)(A,{rows:a,columns:x,pagination:!0,pageSize:20,disableColumnMenu:!0,rowHeight:40,loading:!1,headerHeight:40,sortingMode:"server",hideFooter:a.length<=20,isRowSelectable:function(){return!1},components:{Pagination:w},onRowClick:function(e){e.row.explorerLink&&window.open(e.row.explorerLink)}})})},k=r(51848);function O(){var e,n,r=(e=[""],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return O=function(){return r},r}var T=function(){var e=(0,a.Ge)(),n=e.account,r=e.chainId,d=(0,c.useState)(""),s=d[0],l=d[1],p=(0,u.d)(n,r,1e4,"past",[]),f=p.orders,m=p.refreshOrders,h=(0,c.useCallback)((function(e){var n=e.target.value;l(n)}),[s]),v=(0,c.useCallback)((function(){m()}),[m]);return(0,t.BX)(o.ZP,{item:!0,css:(0,i.iv)(O()),children:[(0,t.tZ)(k.ZP,{value:s,onChange:h,onRefresh:v}),f.length?(0,t.tZ)(b,{chainId:r,rows:f,searchQuery:s}):null]})}},51848:function(e,n,r){r.d(n,{W_:function(){return m},Pp:function(){return h}});var t=r(35944),o=r(90948),i=r(86886),a=r(41796),u=r(70917),c=r(22038),d=r(32103),s=r(68850);function l(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function p(){var e=l(["\n        flex-direction: row;\n        flex-wrap: nowrap;\n        justify-content: space-between;\n        align-items: center;\n        margin-top: 12px;\n        margin-bottom: 16px;\n      "]);return p=function(){return e},e}function f(){var e=l(["\n          width: 205px;\n        "]);return f=function(){return e},e}var m=(0,o.ZP)(d.d7)((function(e){return{fill:e.theme.palette.text.primary,fontSize:"0.875rem"}})),h=(0,o.ZP)(i.ZP)((function(e){var n=e.theme;return{width:"24px",height:"24px",cursor:"pointer",borderRadius:"8px",alignItems:"center",justifyContent:"center",background:(0,a.Fq)(c.S.text[n.palette.mode],.04)}}));n.ZP=function(e){var n=e.value,r=e.onChange,o=e.onRefresh;return(0,t.BX)(i.ZP,{container:!0,css:(0,u.iv)(p()),children:[(0,t.tZ)(i.ZP,{item:!0,css:(0,u.iv)(f()),children:(0,t.tZ)(s.b,{value:n,onChange:r,variant:"small",placeholder:"Search tokens name"})}),(0,t.tZ)(h,{container:!0,onClick:o,children:(0,t.tZ)(m,{})})]})}},94859:function(e,n,r){r.d(n,{z:function(){return k},d:function(){return b}});var t=r(28520),o=r.n(t),i=r(2593),a=r(19485),u=r(67294),c=r(9669),d=r.n(c),s=r(61407);function l(e,n,r,t,o,i,a){try{var u=e[i](a),c=u.value}catch(d){return void r(d)}u.done?n(c):Promise.resolve(c).then(t,o)}function p(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function a(e){l(i,t,o,a,u,"next",e)}function u(e){l(i,t,o,a,u,"throw",e)}a(void 0)}))}}var f=p(o().mark((function e(n,r){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"\n    query GetOrdersByOwner($owner: String) {\n      orders(\n        where:{recipient:$owner,status:ACTIVE},\n        orderBy: createdAtBlock, \n        orderDirection: desc\n      ) {\n        id\n        orderId\n        recipient {\n          id\n        }\n        inputToken\n        outputToken\n        inputAmount\n        minReturnAmount\n        stoplossAmount\n        orderEncodedData\n        shares\n        createdAtBlock\n      }\n    }\n  ",e.prev=1,e.next=4,d().post(s.TL[r],{query:"\n    query GetOrdersByOwner($owner: String) {\n      orders(\n        where:{recipient:$owner,status:ACTIVE},\n        orderBy: createdAtBlock, \n        orderDirection: desc\n      ) {\n        id\n        orderId\n        recipient {\n          id\n        }\n        inputToken\n        outputToken\n        inputAmount\n        minReturnAmount\n        stoplossAmount\n        orderEncodedData\n        shares\n        createdAtBlock\n      }\n    }\n  ",variables:{owner:n.toLowerCase()}});case 4:return t=e.sent.data,e.abrupt("return",t.data.orders||[]);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),m=p(o().mark((function e(n,r){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"\n    query GetOrdersByOwner($owner: String) {\n      orders(\n        where:{recipient:$owner,status_not:ACTIVE},\n        orderBy: updatedAt, \n        orderDirection: desc\n      ) {\n        id\n        inputToken\n        outputToken\n        inputAmount\n        minReturnAmount\n        stoplossAmount\n        status\n        updatedAt\n        executedTxHash\n        cancelledTxHash\n      }\n    }\n  ",e.prev=1,e.next=4,d().post(s.TL[r],{query:"\n    query GetOrdersByOwner($owner: String) {\n      orders(\n        where:{recipient:$owner,status_not:ACTIVE},\n        orderBy: updatedAt, \n        orderDirection: desc\n      ) {\n        id\n        inputToken\n        outputToken\n        inputAmount\n        minReturnAmount\n        stoplossAmount\n        status\n        updatedAt\n        executedTxHash\n        cancelledTxHash\n      }\n    }\n  ",variables:{owner:n.toLowerCase()}});case 4:return t=e.sent.data,e.abrupt("return",t.data.orders);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),h=r(80502);function v(e,n,r,t,o){var a=void 0!==o&&o;try{if(e&&(n||0===n)&&r&&(t||0===t)){var u=i.O$.from(10).pow(i.O$.from(18));return a?e.mul(u).div(r).mul(i.O$.from(10).pow(i.O$.from(t))).div(i.O$.from(10).pow(i.O$.from(n))):r.mul(u).div(e).mul(i.O$.from(10).pow(i.O$.from(n))).div(i.O$.from(10).pow(i.O$.from(t)))}}catch(c){}}var w=r(34497);function g(e,n,r,t,o,i,a){try{var u=e[i](a),c=u.value}catch(d){return void r(d)}u.done?n(c):Promise.resolve(c).then(t,o)}function y(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function a(e){g(i,t,o,a,u,"next",e)}function u(e){g(i,t,o,a,u,"throw",e)}a(void 0)}))}}function x(e){return function(e){if(Array.isArray(e)){for(var n=0,r=new Array(e.length);n<e.length;n++)r[n]=e[n];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var A={open:f,past:m};function b(e,n,r,t,i){var a=void 0===r?3e3:r,c=void 0===i?[]:i,d=(0,u.useState)([]),s=d[0],l=d[1],p=(0,u.useRef)(),f=(0,u.useCallback)(y(o().mark((function r(){var i;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(e&&(0,h.UJ)(e)&&n)){r.next=5;break}return r.next=3,A[t](e,n);case 3:i=r.sent,l(i);case 5:case"end":return r.stop()}}),r)}))),[e,n,t]);return(0,u.useEffect)((function(){l([]);var e=function(n){p.current&&clearTimeout(p.current),p.current=setTimeout(y(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f();case 2:e();case 3:case"end":return n.stop()}}),n)}))),n?0:a||5e3)};return e(!0),function(){p.current&&clearTimeout(p.current)}}),[e,n].concat(x(c))),{orders:s,refreshOrders:f}}function k(e,n,r,t){if(!e.id)return null;var o=a.getAddress(e.inputToken),u=a.getAddress(e.outputToken),c=r[o],d=r[u];if(!c||!d)return null;if(!r[o]||!r[u])return null;var s=c.symbol,l=c.decimals,p=c.logoURI,f=d.symbol,m=d.decimals,g=d.logoURI,y=i.O$.from("0"===e.inputAmount&&e.creationAmount?e.creationAmount:e.inputAmount),x=i.O$.from(e.minReturnAmount),A=i.O$.from(e.stoplossAmount),b="CANCELLED"===e.status,k=(0,h.E8)(n,b?e.cancelledTxHash:e.executedTxHash,"transaction");if("history"===t)return{pairs:"".concat(s," -> ").concat(f),sell:"".concat((0,h.QB)(y,l,6)," ").concat(s),expected:"".concat((0,h.QB)(x,m,6)," ").concat(f),id:e.id,explorerLink:k,dateOfExecution:(0,w.Z)(new Date(1e3*e.updatedAt),"yyyy/MM/dd kk:mm")};var O,T=v(y,l,x,m,!1),C=v(y,l,x,m,!0);return"openOrder"===t?{fromSymbol:s,fromlogoURI:p,fromAddress:o,recipient:null===(O=e.recipient)||void 0===O?void 0:O.id,fromDecimals:l,toSymbol:f,tologoURI:g,toDecimals:m,toAddress:u,inputAmount:y,minReturnAmount:x,stoplossAmount:A,explorerLink:k,rateFromTo:T,rateToFrom:C,orderInfo:{orderId:e.orderId,orderEncodedData:e.orderEncodedData,orderShares:e.shares}}:{fromSymbol:s,fromDecimals:l,toSymbol:f,toDecimals:m,inputAmount:y,minReturnAmount:x,stoplossAmount:A,explorerLink:k,rateFromTo:T,rateToFrom:C}}}}]);